<!DOCTYPE html>
<html>
<head>
    <title>JavaScript for OOP Developers</title>

    <link rel="stylesheet" type="text/css" href="main.css" media="all">
</head>

<body>
    <h1>JavaScript for OOP Developers</h1>

    <section id="introduction">
        <h2>Introduction</h2>

        <p>
        This is a short introduction to JavaScript for people that are already well-versed
        in object-oriented class-based programming languages such as Java, C#, or C++. I will 
        be going over what prior knowledge will be useful in JavaScript, and the prior knowledge
        that can get you in trouble.
        </p>

        <p>
        JavaScript is frequently regarded with disdain by people used to other languages. Many
        programmers go into JavaScript with no preparation and assume their OOP techniques will work, only
        to run into various issues due to the inner workings of the language. I encourage the reader to 
        view JavaScript as a full language in its own right, instead of as a tool to manipulate web pages.
        </p>

        <h3>What JavaScript is</h3>

        <p>
        JavaScript is a dynamically typed scripting language that primarily powers the web, 
        though its usage outside of the browser is rapidly increasing. JavaScript was created in 
        10 days by Brendan Eich. The syntax of JavaScript is derived from C, just as in Java/C#/C++.
        </p>

        <p>
        JavaScript requires a runtime environment to execute in. This is generally the web browser,
        but standalone engines do exist, such as the one that powers node. <i>JavaScript</i> is
        a trademarked name, and the more generic <i>ECMAScript</i> may be used when referring to the language.
        </p>

        <ul>
            <li>JavaScript has first-class functions (functions can be passed as variables).</li>
            <li>JavaScript functions may be anonymous (they may have no name).</li>
            <li>JavaScript functions may be invoked immediately.</li>
            <li>JavaScript has 64-bit floating point representation for all numbers.</li>
            <li>JavaScript has closures (a function plus its execution environment that can be passed around).</li>
            <li>JavaScript is dynamically typed.</li>
            <li>JavaScript is duck typed (two objects with the same property name, but different logic or types, are treated similarly).</li>
            <li>JavaScript has automatic semicolon insertion.</li>
        </ul>

        <h3>What JavaScript is not</h3>

        <p>
        JavaScript is not like other languages. Things that look familiar may have totally different meanings.
        An example of this is classes in ES6. JavaScript still uses prototypical objects, the classes are only
        syntactic sugar.
        </p>

        <ul>
            <li>JavaScript is not a class-based language (it uses prototypes instead).</li>
            <li>JavaScript is not related to the <i>Java</i> language (the name is due to marketing).</li>
            <li>JavaScript is not compiled (it is interpreted).</li>
            <li>JavaScript is not purely functional (but has functional features).</li>
            <li>JavaScript is not typed (no checking of data types).</li>
        </ul>

        <p>
        Hopefully these differences can help convince you to take the language seriously.
        </p>
    </section>

    <section id="variable-declaration">
        <h2>Variable declaration</h2>

        <div class="compares">
            <p>Quick look</p>
            <div class="example code compare java">
<strong>Java</strong>

int productCount;
String name = "Taylor";
float x = 2.2;
int y = 4;
            </div>

            <div class="example code compare c-sharp">
<strong>C#</strong>

int productCount;
string name = "Taylor";
float x = 2.2f;
int y = 4;
            </div>

            <div class="example code compare javascript">
<strong>JavaScript</strong>

var productCount;
var name = 'Taylor';
var x = 2.2;
var y = 4;
z = 50;
            </div>
        </div>

        <p>
        An important concept to grasp in JavaScript is that of <em>dynamic typing</em>. Unlike its namesake Java,
        JavaScript usually does not concern itself with the type of its variables until the last possible moment. This
        last moment ends up being during runtime. The advantage is that the JavaScript programmer can just declare variables
        with the keyword <strong>var</strong> and doesn't generally have to think about types. As long as the operations on
        the types are allowed, the JavaScript engine will happily execute your code.
        </p>

        <div class="example code">
<strong>JavaScript</strong>

function add (x1, x2){
    return x1 + x2;
}

add(1, 2);                // allowed, returns 3
add("goal", "keeper");    // allowed, returns "goalkeeper"
add(1, "keeper");         // allowed, returns "1keeper"
        </div>
        <p class="caption">This behavior is bizzare to someone used to static typing. The number being added to the string will 
        make more sense when we examine typing more in-depth.</p>

        <p>
        In the example above, JavaScript gladly adds whatever it can in our function. No types are declared (and they can't be!),
        which leads to some strange behavior if you are used to statically typed languages!
        </p>

        <aside>
            <p>
            Those fluent in C#
            might be thinking they have nothing to worry about since the C# language has the <strong>var</strong> keyword, but
            they should note that C# is still statically typed and that the var keyword just allows type inferrance. The 
            <strong>dynamic</strong> keyword in C# is much more like <strong>var</strong> in JavaScript.
            </p>

            <div class="example code">
<strong>C#</strong>

dynamic x;   // allowed in C#,     examined at runtime
var y;       // not allowed in C#, no type can be inferred at compile time
            </div>
            <p class="caption">In C#, the dynamic and var keywords do vastly different things. People moving to JavaScript
            need to beware of making assumptions with regards to syntax.</p>
        </aside>

        <p>
        The primary pitfall with dynamic typing is getting your types mixed up. Because types are not checked, you can do
        things like try to get the length property of a Number type or call the string uppercase function on a Boolean type.
        </p>

        <div class="example code">
<strong>JavaScript</strong>

function shortLength (item){
    return item.length / 2;
}

shortLength(4);                 // returns NaN
shortLength([1, 2, 3, 4]);      // returns 2
shortLength({ key: 'value' });  // returns NaN
shortLength({ length: 40 });    // returns 20
shortLength(true);              // returns NaN
shortLength();                  // error: item is undefined
shortLength(null);              // error: item is null
        </div>
        <p class="caption">Unintended behavior is usually a side effect of dyanmic typed languages.</p>

        <p>
        You will not know that there is a mistake until the code actually executes at runtime. Another common error along
        the same line involves function arguments. A function that expects a string parameter, for example, will still happily
        take a Number (or any type!).
        </p>

        <p>
        One might be led to think that dynamic typing makes code nearly impossible to maintain. This depends on how
        good your programmers are and how good your documentation is. JavaScript functions and objects should be documented
        with the expected types of all arguments and properties. Editors with <em>Intellisense</em> functionality will
        then be able to hint to the developer the proper types to use.
        </p>

        <div class="example code">
<strong>JavaScript</strong>

/**
 * Returns half of the length of an Array
 *
 * @param {Array} item     The array to get the length of 
 * @returns {Number}
 */
function shortLength (item){
    return item.length / 2;
}
        </div>
        <p class="caption">The annotated function will show hints in editors with enabled functionality. This format
        is called 'JSDoc'.</p>

        <p>
        It is possible to also manually check the types in JavaScript and even to throw errors, but in practice, both
        of these are rare. Type checking by hand usually adds a lot of bloat to the code base. In addition, you can get proper
        type checking in JavaScript by using something like TypeScript (which compiles to JavaScript). You might want to consider
        doing type checks or throwing errors for code where unintended behavior would be a side effect. Otherwise, JavaScript
        programmers tend to let runtime errors catch most mistakes.
        </p>

        <div class="example code">
<strong>JavaScript</strong>

/**
 * Returns half of the length of an Array
 *
 * @param {Array} item     The array to get the length of 
 * @returns {Number}
 */
function shortLength (item){
    if ( item === undefined ) {
        throw "shortLength function missing parameter: 'item'";
    } 

    if ( Object.prototype.toString.call(item) === '[object Array]' ) {
        return item.length / 2;
    } else {
        throw "'item' parameter is not an Array type";
    }   
}
        </div>
        <p class="caption">The type checked version of the function adds a lot of weight, but it does stop unintended behavior.</p>

        <p>
        Overall, the JavaScript programmer needs to always keep types at the front of their mind. At first glance, it might
        seem that dynamic typing lets one forget about types and just focus on the code, but in reality, it forces the
        programmer to be extra vigilent with the code that they type and the assupmtions that they make.
        </p>

    </section>

    <section id="variable-scope">
        <h2>Variable scope</h2>

        <div class="compares">
            <p>Quick look</p>
            <div class="example code compare java">
<strong>Java</strong>

public class Widget {
    private int x = 3;
    // declare instance variable

    public void DoSomething(){
        x = x + 1;
        // modifies instance variable x to 4
    }
}
            </div>

            <div class="example code compare c-sharp">
<strong>C#</strong>

public class Widget {
    private int x = 3;
    // declare instance variable

    public void DoSomething(){
        x = x + 1;
        // modifies instance variable x to 4
    }
}
            </div>

            <div class="example code compare javascript">
<strong>JavaScript</strong>

(function(){
    x = 3;
    // creates global variable

    var DoSomething = function(){
        x = x + 1;
        // modifies global variable to 4
    };
})();
            </div>
        </div>

        <p>
        Scope in JavaScript is important to get right as many errors can be traced back to assuming
        that the scoping works just as it does in C-like languages. Of particular importance is the usage
        of the <strong>var</strong> keyword and of the global scope.
        </p>

        <h3>The object chain</h3>

        <p>
        In JavaScript, anything declared (variables and functions) is scoped to the object that the delcaration belongs to. 
        If there is no object, then it gets bound to the global object (and it is then called globally scoped). This should be
        familiar to programemrs of the C-like languages. The global object on the browser has the name <strong>window</strong> 
        and can be referred from anywhere.
        </p>

        <p>
        If things are always scoped to the objects they belong to, then how do variables get scoped to just a function? The secret
        here is that in JavaScript, <em>functions are a type of object</em>! This means that those variables inside a function
        are actually being scoped to an object. Since all functions are objects, this creates a chain of objects, from the innermost
        function, all the way back to the global object. Consider the following example:
        </p>

        <div class="example code">
var x = 5;                     // global scope

var CoolThing = function(){    // global scope
  var x = 2;                   // local to CoolThing

  var HotThing = function(){   // local to CoolThing
    var x = 7;                 // local to HotThing
  };
};
        </div>
        <p class="caption">Scoping examples in JavaScript.</p>

        <p>
        In the example, <strong>CoolThing</strong> is a function in the global object. The global object (in the browser)
        is called <strong>window</strong>. It has two propeties under it, <strong>window.x</strong> and <strong>window.CoolThing</strong>. The CoolThing function has its own properties scoped to it, called <strong>x</strong> and <strong>HotThing</strong>. The code above produces an object chain that looks like this:
        </p>

        <div class="example code">
window                          Object 
   &#8627; x                      Number (5)
   &#8627; CoolThing       Function (Object)
       &#8627; x                  Number (2)
       &#8627; HotThing    Function (Object)
           &#8627; x              Number (7)
        </div>
        <p class="caption">The object chain to the prior example.</p>

        <h3>The <em>var</em> keyword</h3>

        <p>
        When declaring variables in JavaScript, they can be declared with or without the <strong>var</strong> keyword.
        If the <strong>var</strong> keyword is used, then a new variable is created scoped to the object 
        the variable belongs to. This behaves just like you would expect variable declaration to behave in say, Java.
        </p>

        <div class="example code">
var a;         // scoped to global object

function(){
    var b;     // scoped to anonymous function
}
        </div>

        <p>
        The tricky part happens if the <strong>var</strong> keyword is not used. The interpreter will first check for a 
        locally scoped variable to assign the value to. If none exists, then the parent object is checked, then the parent's parent
        and so on up the chain, until hitting the global object. The first variable it finds with the matching name will be
        assigned the value. If no assignment is possible (i.e., the name has not been used anywhere up the chain), then
        the interpreter will create a new <em>globally</em> scoped variable and assign it.
        </p>

        <div class="example code">
var Pie = function(){
    x = 2;
};
        </div>

        <p>
        In the example above, <strong>Pie</strong> is a function bound to the global object. When the function declaration begins 
        to be interpreted, the object chain looks like this:
        </p>

        <div class="example code">
window                    Object 
   &#8627; Pie       Function (Object)
        </div>

        <p>
        The interpreter will do the following when executing the <i>x = 2;</i> line:
        </p>

        <ol>
            <li>The variable declaration does not have the <strong>var</strong> keyword.</li> 
            <li>Check the object that the declaration belongs to for the <strong>x</strong> variable.</li>
            <li>It does not have an existing variable <strong>x</strong>.</li>
            <li>Next check the parent of the object, which is the global object.</li>
            <li>The variable is not declared here either.</li> 
            <li>Can't go any higher in the object chain, so create a new variable called <strong>x</strong> and bind it to the global object.</li>
        </ol>

        <p>
        The final object chain will now look like this:
        </p>

        <div class="example code">
window                    Object
   &#8627; Pie       Function (Object)
   &#8627; x                Number (2)
        </div>
        <p class="caption">Note that the 'x' variable ended up scoped to the global object instead of to the Pie function.</p>

        <p>
        This behavior, if the JavaScript programmer does not know it well, leads to countless errors. Global variables can
        be modified when the progammer does not intend it. Even worse, new global variables can be declared, despite the variable
        declaration <em>not</em> existing in the global scope.
        </p>

        <p>
        As a best practice, always delcare local variables with the <strong>var</strong> keyword.
        </p>
    </section>

    <section id="variable-ssignment">
        <h2>Variable Assignment</h2>

        <div class="compares">
            <div class="example code compare java">
<strong>Java</strong>

int x = 2;
float y = 4.5F;
boolean isFun = true;
String letters = "abc";
final Function<Integer, Integer> myFunc = (x) -> x*x;

x = 4;
x = "a";   
// compile error, mis-matched types

int z = x + y + isFun + letters + myFunc;  
// compile error, mis-matched types
            </div>

            <div class="example code compare c-sharp">
<strong>C#</strong>

var x = 2;
var y = 4.5f;
var isFun = true;
var letters = "abc";
Func<int, int> myFunc = x => x*x;

x = 4;
x = "a";   
// compile error, mis-matched types

var z = x + y + isFun + letters;  
// compile error, mis-matched types
            </div>

            <div class="example code compare javascript">
<strong>JavaScript</strong>

x = 2;
y = 4.5;
var isFun = true;
var letters = 'abc';
var myFunc = function(x){return x*x;};

x = 4;
x = "a";   
// x is now a String type set to "a", no error

var z = x + y + isFun + letters + myFunc;
// z is set to "9.5abcfunction (x){return x*x;}", no error
            </div>
        </div>

    </section>

    <section id="object-definition">
        <h2>Object definition</h2>

        <div class="compares">
            <div class="example code compare java">
<strong>Java</strong>

public class Point {
    private int x;
    private int y;

    public int getX(){
        return this.x;
    }

    public void setX(int x){
        this.x = x;
    }

    public int getY(){
        return this.y;
    }

    public void setY(int Y){
        this.y = y;
    }
}
            </div>

            <div class="example code compare c-sharp">
<strong>C#</strong>

public class Point {
    public int x { get; set; }
    public int y { get; set; }
}
            </div>

            <div class="example code compare javascript">
<strong>JavaScript</strong>

var Point = function(){
    this.x = null;
    this.y = null;  
};
            </div>
        </div>
        <p>Quick look</p>

    </section>
</body>
</html>